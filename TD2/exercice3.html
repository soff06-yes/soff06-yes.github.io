<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>exercice 3 : babylon</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow: hidden;
        }
        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script>
        const canvas = document.getElementById("canvas");
        const moteur = new BABYLON.Engine(canvas, true);
        const scene = new BABYLON.Scene(moteur);
        const camera = new BABYLON.ArcRotateCamera("camera", Math.PI / 2, Math.PI / 4, 50, BABYLON.Vector3.Zero(),scene);
        camera.attachControl(canvas, true);
        const lumiere = new BABYLON.PointLight("lumiÃ¨reSoleil", BABYLON.Vector3.Zero(), scene);
        lumiere.intensity = 2;
        const cheminAssets = "babylonimages/";
        const soleil = BABYLON.MeshBuilder.CreateSphere("soleil", { diameter: 5 }, scene);
        const materiauSoleil = new BABYLON.StandardMaterial("materiauSoleil", scene);
        materiauSoleil.emissiveTexture = new BABYLON.Texture(cheminAssets + "soleil.jpg", scene);
        soleil.material = materiauSoleil;

        function creerPlanete(nom, fichierTexture, diametre, distance, vitesseRotation, vitesseOrbite) {
            const planete = BABYLON.MeshBuilder.CreateSphere(nom, { diameter: diametre }, scene);
            const materiau = new BABYLON.StandardMaterial(nom + "Materiau", scene);
            materiau.diffuseTexture = new BABYLON.Texture(cheminAssets + fichierTexture, scene);
            planete.material = materiau;
            const orbite = new BABYLON.TransformNode(nom + "Orbite", scene);
            planete.parent = orbite;
            planete.position.x = distance;
            return { planete, orbite, vitesseRotation, vitesseOrbite };
        }
        const donneesPlanetes = [
            creerPlanete("mercure", "mercure.jpg", 0.5, 7, 0.007, 0.013),
            creerPlanete("venus", "venus", 1, 9, 0.005, 0.012),
            creerPlanete("terre", "terre_planete.jpg", 1, 12, 0.007, 0.01),
            creerPlanete("mars", "mars.jpg", 0.8, 15, 0.006, 0.008),
            creerPlanete("jupiter", "jupiter.jpg", 3, 20, 0.01, 0.007),
            creerPlanete("saturne", "saturne.jpg", 2.5, 25, 0.009, 0.006),
            creerPlanete("uranus", "uranus.jpg", 2, 30, 0.008, 0.005),
            creerPlanete("neptune", "neptune.jpg", 2, 35, 0.007, 0.004)
        ];
        const Ciel = BABYLON.MeshBuilder.CreateBox("Ciel", { size: 1000 }, scene);
        const materiauCiel = new BABYLON.StandardMaterial("materiauCiel", scene);
        materiauCiel.backFaceCulling = false;
        materiauCiel.diffuseColor = new BABYLON.Color3(0, 0, 0);
        materiauCiel.specularColor = new BABYLON.Color3(0, 0, 0);
        materiauCiel.reflectionTexture = new BABYLON.CubeTexture(cheminAssets + "g", scene);
        materiauCiel.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
        Ciel.material = materiauCiel;

        scene.registerBeforeRender(() => {
            soleil.rotation.y += 0.0003;
            donneesPlanetes.forEach(p => {
                p.orbite.rotation.y += p.vitesseOrbite;
                p.planete.rotation.y += p.vitesseRotation;
            });
        });
        moteur.runRenderLoop(() => {
            scene.render();
        });
        window.addEventListener("resize", () => {
            moteur.resize();
        });
    </script>
</body>
</html>
